<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Digineer Store - Solusi Digital Profesional & Jasa Kreatif</title>
  <meta name="description" content="Jasa desain profesional, development website, digital marketing, dan solusi kreatif untuk transformasi bisnis Anda. Tim ahli siap membantu kesuksesan online." />
  <meta name="keywords" content="jasa desain, website development, digital marketing, branding, UI/UX design, video editing, social media management" />
  <meta name="author" content="Digineer Store" />
  <meta name="robots" content="index, follow" />

  <!-- OG/Twitter (dasar) -->
  <link rel="canonical" href="https://example.com/" />
  <meta property="og:title" content="Digineer Store - Solusi Digital Profesional" />
  <meta property="og:description" content="Jasa desain, website, dan digital marketing untuk transformasi bisnismu." />
  <meta property="og:image" content="https://example.com/og-cover.jpg" />
  <meta property="og:url" content="https://example.com/" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#6366f1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Digineer Store" />

  <!-- Fonts & Icons -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" as="style" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    :root{
      --primary:#6366f1;--primary-dark:#4f46e5;--primary-light:#8b5cf6;
      --secondary:#f59e0b;--accent:#ec4899;--dark:#1f2937;--light:#f8fafc;--gray:#6b7280;
      --success:#10b981;--error:#ef4444;
      --shadow:0 4px 6px -1px rgba(0,0,0,.1);--shadow-lg:0 10px 15px -3px rgba(0,0,0,.1);
      --radius:12px;--transition:all .3s ease;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter',sans-serif;line-height:1.6;color:var(--dark);background:var(--light)}
    a{color:inherit}

    /* Header */
    .header{
      position:fixed;inset:0 0 auto 0;background:rgba(255,255,255,.95);backdrop-filter:blur(20px);
      z-index:1000;padding:.75rem 0;box-shadow:var(--shadow)
    }
    .nav-container{
      max-width:1200px;margin:0 auto;padding:0 1rem;
      display:grid;grid-template-columns:auto 1fr auto;gap:1rem;align-items:center
    }
    .brand{display:flex;align-items:center;gap:.6rem;text-decoration:none}
    .brand img{height:28px;width:auto;display:block}
    .brand-title{font-weight:800;font-size:1.25rem;background:linear-gradient(135deg,var(--primary),var(--accent));
      -webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .nav-links{display:flex;gap:1.25rem;justify-self:center}
    .nav-link{color:var(--dark);text-decoration:none;font-weight:500;transition:var(--transition)}
    .nav-link:hover{color:var(--primary)}
    .nav-actions{display:flex;gap:.5rem}
    .icon-btn{
      width:40px;height:40px;border:none;background:#fff;border-radius:999px;
      display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--transition);
      box-shadow:inset 0 0 0 1px #e5e7eb;position:relative
    }
    .icon-btn:hover{background:var(--primary);color:#fff}
    .badge{
      position:absolute;top:-6px;right:-6px;background:var(--accent);color:#fff;border-radius:999px;
      min-width:18px;height:18px;font-size:.7rem;display:flex;align-items:center;justify-content:center;padding:0 4px
    }

    /* Hero */
    .hero{
      min-height:100vh;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding-top:72px
    }
    .hero-inner{max-width:900px;margin:0 auto;text-align:center;padding:2rem}
    .hero-title{font-size:3rem;font-weight:800;line-height:1.1;margin-bottom:1rem}
    .hero-title .accent{color:var(--secondary)}
    .hero-sub{font-size:1.125rem;opacity:.95;margin-bottom:1.75rem}
    .hero-actions{display:flex;gap:.75rem;justify-content:center;flex-wrap:wrap}
    .btn{padding:.85rem 1.25rem;border:none;border-radius:14px;font-weight:700;cursor:pointer;transition:var(--transition);display:inline-flex;align-items:center;gap:.5rem}
    .btn-primary{background:var(--primary);color:#fff}.btn-primary:hover{background:var(--primary-dark);transform:translateY(-2px)}
    .btn-secondary{background:rgba(255,255,255,.2);color:#fff;backdrop-filter:blur(10px)}.btn-secondary:hover{background:rgba(255,255,255,.3)}

    /* Products */
    .section{padding:4rem 0}
    .container{max-width:1200px;margin:0 auto;padding:0 1rem}
    .section-title{text-align:center;font-size:2rem;font-weight:800;margin-bottom:2rem;
      background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .products-header{display:flex;gap:1rem;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:1.5rem}
    .search-box{position:relative;min-width:280px;flex:1}
    .search-input{width:100%;padding:1rem 1rem 1rem 3rem;border:1px solid #e5e7eb;border-radius:14px;font-size:1rem;background:#fff}
    .search-icon{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:var(--gray)}
    .filter-tabs{display:flex;gap:.5rem;flex-wrap:wrap}
    .filter-tab{padding:.6rem 1rem;border:1px solid #e5e7eb;background:#fff;border-radius:999px;cursor:pointer;transition:var(--transition)}
    .filter-tab.active{background:var(--primary);color:#fff;border-color:var(--primary)}
    .products-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:1rem}
    .product-card{grid-column:span 6;background:#fff;border-radius:16px;overflow:hidden;box-shadow:var(--shadow);transition:var(--transition)}
    .product-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg)}
    .product-image{width:100%;height:180px;object-fit:cover;aspect-ratio:3/2}
    .product-content{padding:1rem}
    .product-category{color:var(--primary);font-size:.85rem;font-weight:700;text-transform:uppercase;margin-bottom:.35rem}
    .product-title{font-size:1.1rem;font-weight:700;margin-bottom:.35rem}
    .product-description{color:var(--gray);font-size:.95rem;margin-bottom:.75rem}
    .product-footer{display:flex;align-items:center;justify-content:space-between}
    .product-price{font-size:1.25rem;font-weight:800;color:var(--primary)}
    .product-actions{display:flex;gap:.4rem}
    .action-btn{width:40px;height:40px;border:none;border-radius:12px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--transition)}
    .btn-cart{background:var(--primary);color:#fff}.btn-cart:hover{background:var(--primary-dark)}
    .btn-wishlist{background:#f3f4f6;color:var(--gray)}.btn-wishlist.active{background:var(--accent);color:#fff}

    /* Cart */
    .cart-overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1000;opacity:0;visibility:hidden;transition:var(--transition)}
    .cart-overlay.active{opacity:1;visibility:visible}
    .cart-sidebar{position:fixed;top:0;right:-420px;width:100%;max-width:400px;height:100vh;background:#fff;box-shadow:var(--shadow-lg);z-index:1001;transition:var(--transition);display:flex;flex-direction:column}
    .cart-sidebar.active{right:0}
    .cart-header{padding:1rem;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center}
    .cart-items{flex:1;overflow-y:auto;padding:1rem}
    .cart-item{display:flex;gap:.8rem;padding:.8rem;border-radius:12px;background:#f9fafb;margin-bottom:.8rem}
    .cart-item-image{width:60px;height:60px;object-fit:cover;border-radius:10px}
    .cart-item-name{font-weight:700}
    .cart-item-price{color:var(--primary);font-weight:700}
    .cart-footer{padding:1rem;border-top:1px solid #e5e7eb}
    .cart-total{display:flex;justify-content:space-between;font-size:1.1rem;font-weight:800;margin-bottom:.75rem}
    .checkout-btn{width:100%;padding:1rem;background:var(--primary);color:#fff;border:none;border-radius:14px;font-weight:800;cursor:pointer}

    /* Notification */
    .notification{position:fixed;top:90px;right:1rem;background:#fff;padding:1rem 1.25rem;border-radius:12px;box-shadow:var(--shadow-lg);border-left:4px solid var(--primary);display:flex;align-items:center;gap:.6rem;transform:translateX(400px);transition:transform .3s ease;z-index:1002}
    .notification.show{transform:translateX(0)}
    .notification.success{border-left-color:var(--success)}
    .notification.error{border-left-color:var(--error)}

    /* Skeleton */
    .skeleton{background:linear-gradient(90deg,#eee 25%,#f5f5f5 37%,#eee 63%);background-size:400% 100%;animation:shimmer 1.4s ease infinite;border-radius:14px}
    @keyframes shimmer{0%{background-position:100% 0}100%{background-position:-100% 0}}
    .skel-card{grid-column:span 6;background:#fff;border-radius:16px;box-shadow:var(--shadow);padding:1rem}
    .skel-img{height:180px;margin-bottom:1rem}
    .skel-line{height:14px;margin:8px 0}

    /* Accessibility */
    :focus-visible{outline:3px solid var(--primary);outline-offset:3px}
    @media (prefers-reduced-motion:reduce){*{animation:none!important;transition:none!important}}

    /* Responsive */
    @media (min-width:768px){
      .product-card,.skel-card{grid-column:span 4}
      .hero-title{font-size:3.5rem}
      .product-image{height:200px}
    }
    @media (min-width:1024px){
      .product-card,.skel-card{grid-column:span 3}
      .hero-title{font-size:3.75rem}
    }

    /* Footer */
    footer{margin-top:3rem;border-top:1px solid #e5e7eb}
    .footer-inner{max-width:1200px;margin:0 auto;padding:1.25rem 1rem;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem;color:#6b7280}
    .footer-links{display:flex;gap:1.25rem}
    .footer-link{text-decoration:none;font-weight:700;color:#6b7280}
    .footer-link:hover{color:#374151}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="nav-container">
      <!-- LOGO: gunakan aset lokal, footer tidak memuat logo -->
      <a href="#home" class="brand" aria-label="Beranda Digineer">
        <img src="assets/logo.png" alt="Logo Digineer" width="112" height="28"
             decoding="async" fetchpriority="high"
             onerror="this.onerror=null;this.src='https://via.placeholder.com/112x28?text=D';" />
        <span class="brand-title">Digineer</span>
      </a>

      <nav class="nav-links" aria-label="Navigasi utama">
        <a href="#home" class="nav-link">Home</a>
        <a href="#products" class="nav-link">Produk</a>
        <a href="#about" class="nav-link">Tentang</a>
        <a href="#contact" class="nav-link">Kontak</a>
      </nav>

      <div class="nav-actions">
        <button class="icon-btn wishlist-btn" aria-label="Buka wishlist">
          <i class="far fa-heart"></i>
          <span class="badge" id="wishlistBadge">0</span>
        </button>
        <button class="icon-btn cart-btn" aria-label="Buka keranjang" onclick="toggleCart()">
          <i class="fas fa-shopping-cart"></i>
          <span class="badge" id="cartBadge">0</span>
        </button>
        <a href="admin.html" class="icon-btn" aria-label="Halaman admin">
          <i class="fas fa-user-cog"></i>
        </a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" id="home">
    <div class="hero-inner">
      <h1 class="hero-title">Solusi Digital <span class="accent">Profesional</span></h1>
      <p class="hero-sub">Jasa desain, development website, dan solusi kreatif untuk transformasi bisnis Anda dengan tim ahli berpengalaman.</p>
      <div class="hero-actions">
        <button class="btn btn-primary" onclick="scrollToProducts()"><i class="fas fa-rocket"></i>Jelajahi Layanan</button>
        <button class="btn btn-secondary" onclick="showNotification('Fitur konsultasi akan segera hadir!', 'info')"><i class="fas fa-comments"></i>Konsultasi Gratis</button>
      </div>
    </div>
  </section>

  <!-- Products -->
  <section class="section" id="products">
    <div class="container">
      <h2 class="section-title">Layanan Kami</h2>

      <div class="products-header">
        <div class="search-box">
          <i class="fas fa-search search-icon" aria-hidden="true"></i>
          <input type="text" class="search-input" placeholder="Cari layanan..." aria-label="Cari layanan" oninput="onSearch(this.value)" />
        </div>
        <div class="filter-tabs" role="tablist" aria-label="Filter kategori layanan">
          <button class="filter-tab active" role="tab" aria-selected="true" onclick="filterProducts('all', this)">Semua</button>
          <button class="filter-tab" role="tab" aria-selected="false" onclick="filterProducts('design', this)">Desain</button>
          <button class="filter-tab" role="tab" aria-selected="false" onclick="filterProducts('development', this)">Development</button>
          <button class="filter-tab" role="tab" aria-selected="false" onclick="filterProducts('video', this)">Video</button>
        </div>
      </div>

      <div class="products-grid" id="productsContainer" aria-live="polite" aria-busy="true">
        <!-- Skeleton awal -->
      </div>
    </div>
  </section>

  <!-- Cart -->
  <div class="cart-overlay" onclick="toggleCart()" aria-hidden="true"></div>
  <aside class="cart-sidebar" aria-label="Keranjang belanja">
    <div class="cart-header">
      <h3>Keranjang Belanja</h3>
      <button class="cart-close" aria-label="Tutup keranjang" onclick="toggleCart()"><i class="fas fa-times" aria-hidden="true"></i></button>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <div class="cart-footer">
      <div class="cart-total"><span>Total:</span><span id="cartTotal">Rp 0</span></div>
      <button class="checkout-btn" onclick="checkout()"><i class="fas fa-credit-card" aria-hidden="true"></i> Checkout Sekarang</button>
    </div>
  </aside>

  <!-- Footer (tanpa logo) -->
  <footer>
    <div class="footer-inner">
      <div>© <span id="year"></span> Digineer Store</div>
      <div class="footer-links">
        <a class="footer-link" href="#contact">Kontak</a>
        <a class="footer-link" href="https://wa.me/089507083879" target="_blank" rel="noopener">WhatsApp</a>
      </div>
    </div>
  </footer>

  <!-- Live region untuk screen reader -->
  <div id="liveRegion" aria-live="polite" aria-atomic="true" style="position:absolute;left:-9999px;height:1px;width:1px;overflow:hidden;"></div>

  <script>
    // ====== Data Produk (fallback) ======
    const defaultProducts = [
      { id:'p1', name:'Paket Branding Professional', category:'design', price:2500000, image:'https://images.unsplash.com/photo-1565688534245-05d6b5be184a?auto=format&fit=crop&w=800&q=80', description:'Logo, brand guide, stationery design, dan social media kit lengkap', badge:'Popular' },
      { id:'p2', name:'Website Company Profile', category:'development', price:3500000, image:'https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&w=800&q=80', description:'Website perusahaan modern dengan CMS custom dan responsive design', badge:'Featured' },
      { id:'p3', name:'Video Company Profile', category:'video', price:5000000, image:'https://images.unsplash.com/photo-1554260570-9140fd3b7614?auto=format&fit=crop&w=800&q=80', description:'Video profil perusahaan profesional dengan animasi dan editing', badge:'Premium' },
      { id:'p4', name:'UI/UX Design', category:'design', price:1500000, image:'https://images.unsplash.com/photo-1561070791-2526d30994b5?auto=format&fit=crop&w=800&q=80', description:'Desain UI & UX untuk aplikasi/website', badge:'Hot' },
      { id:'p5', name:'E-Commerce Website', category:'development', price:7500000, image:'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?auto=format&fit=crop&w=800&q=80', description:'Toko online lengkap payment gateway & admin panel', badge:'Best Seller' },
      { id:'p6', name:'Social Media Content', category:'design', price:800000, image:'https://images.unsplash.com/photo-1611162617474-5b21e879e113?auto=format&fit=crop&w=800&q=80', description:'Paket konten media sosial 1 bulan', badge:'New' }
    ];

    // Gunakan data dari Admin Panel bila ada
    function getProducts(){
      try{
        const raw = localStorage.getItem('digineer-products');
        if(raw){
          const arr = JSON.parse(raw);
          if(Array.isArray(arr) && arr.length) return arr;
        }
      }catch(e){}
      return defaultProducts;
    }
    let products = getProducts();

    // ====== State ======
    let cart = JSON.parse(localStorage.getItem('digineer-cart')) || [];
    let wishlist = JSON.parse(localStorage.getItem('digineer-wishlist')) || [];
    let currentFilter = 'all';
    let currentSearch = '';

    // Formatter IDR
    const IDR = new Intl.NumberFormat('id-ID',{style:'currency',currency:'IDR',maximumFractionDigits:0});

    // WhatsApp
    const WHATSAPP_NUMBER = '089507083879';

    // Utils
    function debounce(fn,delay=300){let t;return(...a)=>{clearTimeout(t);t=setTimeout(()=>fn(...a),delay)}}
    function escapeHTML(s){return (s||'').toString().replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]))}

    // URL state
    function syncStateToURL(){
      const url = new URL(window.location);
      url.searchParams.set('filter', currentFilter);
      url.searchParams.set('q', currentSearch || '');
      history.replaceState({},'',url);
    }
    function readStateFromURL(){
      const url = new URL(window.location);
      currentFilter = url.searchParams.get('filter') || 'all';
      currentSearch = url.searchParams.get('q') || '';
      const input = document.querySelector('.search-input'); if(input) input.value=currentSearch;
      document.querySelectorAll('.filter-tab').forEach(t=>{t.classList.remove('active');t.setAttribute('aria-selected','false')});
      const map={all:0,design:1,development:2,video:3}; const idx=map[currentFilter]??0;
      const tabs=document.querySelectorAll('.filter-tab'); if(tabs[idx]){tabs[idx].classList.add('active');tabs[idx].setAttribute('aria-selected','true')}
    }

    // Skeleton
    function showSkeleton(n=6){
      const c=document.getElementById('productsContainer');
      c.setAttribute('aria-busy','true');
      c.innerHTML=Array.from({length:n}).map(()=>`
        <div class="skel-card">
          <div class="skeleton skel-img"></div>
          <div class="skeleton skel-line" style="width:40%"></div>
          <div class="skeleton skel-line" style="width:70%"></div>
          <div class="skeleton skel-line" style="width:55%"></div>
        </div>
      `).join('');
    }

    // Render
    const renderProducts = ()=>{
      const c=document.getElementById('productsContainer');
      let list=[...products];

      if(currentFilter!=='all') list=list.filter(p=>p.category===currentFilter);
      if(currentSearch){
        const q=currentSearch.toLowerCase();
        list=list.filter(p=>p.name.toLowerCase().includes(q)||p.description.toLowerCase().includes(q));
      }

      if(!list.length){
        c.innerHTML=`<div style="grid-column:1/-1;text-align:center;color:var(--gray)">
          <p>Tidak ada layanan yang cocok.</p>
          <button class="btn btn-primary" onclick="resetSearch()">Reset Pencarian</button>
        </div>`;
        c.removeAttribute('aria-busy'); return;
      }

      c.innerHTML=list.map(product=>`
        <article class="product-card">
          <img loading="lazy" decoding="async" class="product-image"
               src="${product.image}"
               onerror="this.onerror=null;this.src='https://via.placeholder.com/600x400?text=Digineer';"
               alt="${escapeHTML(product.name)}" />
          <div class="product-content">
            <div class="product-category">${escapeHTML(getCategoryName(product.category))}</div>
            <h3 class="product-title">${escapeHTML(product.name)}</h3>
            <p class="product-description">${escapeHTML(product.description)}</p>
            <div class="product-footer">
              <div class="product-price">${IDR.format(product.price)}</div>
              <div class="product-actions">
                <button class="action-btn btn-wishlist ${wishlist.includes(product.id)?'active':''}" aria-label="Wishlist ${escapeHTML(product.name)}" onclick="toggleWishlist('${product.id}')">
                  <i class="${wishlist.includes(product.id)?'fas':'far'} fa-heart" aria-hidden="true"></i>
                </button>
                <button class="action-btn btn-cart" aria-label="Tambah ${escapeHTML(product.name)} ke keranjang" onclick="addToCart('${product.id}')">
                  <i class="fas fa-shopping-cart" aria-hidden="true"></i>
                </button>
              </div>
            </div>
          </div>
        </article>
      `).join('');
      c.removeAttribute('aria-busy');
    };

    function displayProducts(){ renderProducts(); syncStateToURL(); }
    function getCategoryName(cat){ return ({design:'Desain',development:'Development',video:'Video Production'})[cat] || cat }

    // Filter & Search
    function filterProducts(cat,el){
      currentFilter=cat;
      document.querySelectorAll('.filter-tab').forEach(t=>{t.classList.remove('active');t.setAttribute('aria-selected','false')});
      if(el){el.classList.add('active');el.setAttribute('aria-selected','true')}
      displayProducts();
    }
    const onSearch = debounce((q)=>{ currentSearch=(q||'').trim(); displayProducts(); },300);
    function resetSearch(){ currentSearch=''; const i=document.querySelector('.search-input'); if(i)i.value=''; displayProducts(); }

    // Cart UX
    let lastFocused=null;
    function toggleCart(){
      const s=document.querySelector('.cart-sidebar'); const o=document.querySelector('.cart-overlay');
      const willOpen=!s.classList.contains('active');
      s.classList.toggle('active'); o.classList.toggle('active');
      document.body.style.overflow = willOpen ? 'hidden' : '';
      if(willOpen){
        lastFocused=document.activeElement;
        s.setAttribute('aria-modal','true'); s.setAttribute('role','dialog');
        const first=s.querySelector('button,[href],input,[tabindex]:not([tabindex="-1"])'); if(first) first.focus();
        document.addEventListener('keydown',handleCartKeys);
      }else{
        s.removeAttribute('aria-modal'); s.removeAttribute('role');
        document.removeEventListener('keydown',handleCartKeys);
        if(lastFocused) lastFocused.focus();
      }
    }
    function handleCartKeys(e){
      if(e.key==='Escape') toggleCart();
      if(e.key==='Tab'){
        const focusables=document.querySelectorAll('.cart-sidebar button,.cart-sidebar [href],.cart-sidebar input,.cart-sidebar [tabindex]:not([tabindex="-1"])');
        const list=[...focusables]; if(!list.length) return;
        const first=list[0], last=list[list.length-1];
        if(e.shiftKey && document.activeElement===first){ last.focus(); e.preventDefault(); }
        else if(!e.shiftKey && document.activeElement===last){ first.focus(); e.preventDefault(); }
      }
    }

    // Cart logic
    function addToCart(id){
      const p=products.find(x=>x.id===id); if(!p) return;
      const ex=cart.find(i=>i.id===id);
      if(ex) ex.quantity+=1; else cart.push({...p, quantity:1});
      localStorage.setItem('digineer-cart',JSON.stringify(cart));
      updateCartUI();
      showNotification(`"${p.name}" ditambahkan ke keranjang! 🛒`,'success');
    }
    function updateCartUI(){
      document.getElementById('cartBadge').textContent = cart.reduce((s,i)=>s+i.quantity,0);
      const items=document.getElementById('cartItems'); const totalEl=document.getElementById('cartTotal');
      if(!cart.length){
        items.innerHTML=`<div style="text-align:center;color:var(--gray)">
          <p>Keranjang kosong</p>
          <button class="btn btn-primary" onclick="toggleCart();scrollToProducts()">Lihat Layanan</button>
        </div>`;
        totalEl.textContent=IDR.format(0); return;
      }
      items.innerHTML=cart.map(item=>`
        <div class="cart-item">
          <img src="${item.image}" alt="${escapeHTML(item.name)}" class="cart-item-image" />
          <div class="cart-item-details">
            <div class="cart-item-name">${escapeHTML(item.name)}</div>
            <div class="cart-item-price">${IDR.format(item.price)} x ${item.quantity}</div>
            <div style="display:flex;gap:.5rem;margin-top:.5rem">
              <button aria-label="Kurangi ${escapeHTML(item.name)}" onclick="updateQuantity('${item.id}', ${item.quantity-1})" ${item.quantity<=1?'disabled':''} style="width:26px;height:26px;border:none;background:#e5e7eb;border-radius:6px;cursor:pointer">-</button>
              <span style="padding:0 .5rem" aria-live="polite">${item.quantity}</span>
              <button aria-label="Tambah ${escapeHTML(item.name)}" onclick="updateQuantity('${item.id}', ${item.quantity+1})" style="width:26px;height:26px;border:none;background:#e5e7eb;border-radius:6px;cursor:pointer">+</button>
              <button aria-label="Hapus ${escapeHTML(item.name)}" onclick="removeFromCart('${item.id}')" style="margin-left:auto;background:none;border:none;color:var(--error);cursor:pointer"><i class="fas fa-trash" aria-hidden="true"></i></button>
            </div>
          </div>
        </div>
      `).join('');
      const total=cart.reduce((s,i)=>s+i.price*i.quantity,0);
      totalEl.textContent=IDR.format(total);
    }
    function updateQuantity(id,qty){ if(qty<1){removeFromCart(id);return;} const it=cart.find(i=>i.id===id); if(it){it.quantity=qty; localStorage.setItem('digineer-cart',JSON.stringify(cart)); updateCartUI();} }
    function removeFromCart(id){ cart=cart.filter(i=>i.id!==id); localStorage.setItem('digineer-cart',JSON.stringify(cart)); updateCartUI(); showNotification('Produk dihapus dari keranjang','success'); }
    function checkout(){
      if(!cart.length){ showNotification('Keranjang masih kosong!','error'); return; }
      const total=cart.reduce((s,i)=>s+i.price*i.quantity,0);
      const lines=cart.map(i=>`• ${i.name} (${i.quantity}x) - ${IDR.format(i.price*i.quantity)}`).join('%0A');
      const msg=`Halo Digineer Store! 👋%0A%0ASaya mau pesan layanan berikut:%0A%0A${lines}%0A%0A💰 *Total: ${IDR.format(total)}*%0A%0ABisa info lebih lanjut mengenai proses order dan pembayaran?`;
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`,'_blank');
      showNotification('Mengarahkan ke WhatsApp... 📱','success');
      setTimeout(()=>{ cart=[]; localStorage.setItem('digineer-cart',JSON.stringify(cart)); updateCartUI(); toggleCart(); },2000);
    }

    // Wishlist
    function toggleWishlist(id){
      const i=wishlist.indexOf(id);
      if(i>-1){ wishlist.splice(i,1); showNotification('Dihapus dari wishlist','success'); }
      else{ wishlist.push(id); showNotification('Ditambahkan ke wishlist! ❤️','success'); }
      localStorage.setItem('digineer-wishlist',JSON.stringify(wishlist));
      document.getElementById('wishlistBadge').textContent = wishlist.length;
      displayProducts();
    }

    // Notification (screen reader friendly)
    function showNotification(msg,type='success'){
      const lr=document.getElementById('liveRegion'); if(lr) lr.textContent=msg;
      const old=document.querySelector('.notification'); if(old) old.remove();
      const n=document.createElement('div'); n.className=`notification ${type}`; n.setAttribute('role','status'); n.setAttribute('aria-live','polite');
      n.innerHTML=`<i class="fas fa-${type==='success'?'check':'exclamation'}-circle" aria-hidden="true"></i><span>${msg}</span>`;
      document.body.appendChild(n); setTimeout(()=>n.classList.add('show'),100);
      setTimeout(()=>{n.classList.remove('show'); setTimeout(()=>n.remove(),300);},3000);
    }

    // Misc
    function scrollToProducts(){ document.getElementById('products').scrollIntoView({behavior:'smooth'}) }

    // Init
    function initialize(){
      readStateFromURL();
      displayProducts();
      updateCartUI();
      document.getElementById('wishlistBadge').textContent = wishlist.length;
      setTimeout(()=>showNotification('Selamat datang di Digineer Store! 🚀','success'),800);
      document.getElementById('year').textContent = new Date().getFullYear();
    }
    document.addEventListener('DOMContentLoaded',()=>{ showSkeleton(); initialize(); });
  </script>
</body>
</html>
