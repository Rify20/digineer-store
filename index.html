<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Digineer Store - Solusi Digital Profesional & Jasa Kreatif</title>
<meta name="theme-color" content="#10bfa4" />
<link rel="icon" href="assets/favicon.ico" />
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
/* === warna & layout (match logo) === */
:root{
  --primary:#10bfa4; --primary-600:#0ea894; --accent:#12d3b7;
  --ink:#0b1220; --muted:#63707f; --bg:#f7faf9; --surface:#fff; --border:#e5e9ec;
  --container:1120px; --header-h:64px; --radius:14px; --radius-sm:10px;
  --shadow:0 6px 20px rgba(2,8,23,.08); --shadow-sm:0 2px 10px rgba(2,8,23,.06); --transition:.25s ease;
}
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%} html{-webkit-text-size-adjust:100%}
body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink);line-height:1.6;-webkit-tap-highlight-color:transparent;padding-top:calc(var(--header-h) + env(safe-area-inset-top,0px))}
input,button{font-size:16px}

/* header anti-kepotong */
.header{position:fixed;left:0;right:0;top:0;z-index:1000;height:calc(var(--header-h) + env(safe-area-inset-top,0px));padding-top:env(safe-area-inset-top,0px);background:rgba(255,255,255,.94);border-bottom:1px solid var(--border);backdrop-filter:saturate(180%) blur(14px)}
.nav{max-width:var(--container);margin:0 auto;height:var(--header-h);padding:0 16px;display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:12px;overflow:visible}
.brand{display:flex;align-items:center;gap:10px;text-decoration:none;white-space:nowrap}
.brand img{height:28px;width:auto;display:block}
.brand span{font-weight:800;color:var(--primary);font-size:1.25rem}
.links{display:flex;gap:24px;justify-self:center}
.nav-link{font-weight:600;text-decoration:none;color:#0b1220b3;padding:.25rem;border-radius:8px}
.nav-link:hover{color:var(--primary)}
.actions{display:flex;gap:8px;align-items:center;flex-wrap:nowrap;overflow:visible}
.icon-btn{width:44px;height:44px;border:1px solid var(--border);background:#fff;border-radius:999px;display:grid;place-items:center;position:relative;cursor:pointer;transition:transform var(--transition)}
.icon-btn:hover{transform:translateY(-1px)}
.badge{position:absolute;right:-6px;top:-6px;background:var(--accent);color:#043a33;border:1px solid #8bf0e1;border-radius:999px;min-width:18px;height:18px;padding:0 6px;display:grid;place-items:center;font-size:.7rem;font-weight:800}
.hamburger{display:none} .drawer{display:none}

/* hero */
.hero{background:radial-gradient(1200px 600px at 20% -10%, rgba(16,191,164,.35) 0%, rgba(16,191,164,0) 60%),linear-gradient(140deg,#14b8a6 0%, #0ea894 28%, #0b1220 85%);color:#fff}
.hero-inner{max-width:var(--container);margin:0 auto;padding:96px 16px 96px;text-align:center}
.hero h1{font-weight:800;font-size:clamp(2rem,3.6vw,3.25rem);line-height:1.08}
.hero .sub{display:block;color:#bdf6ed}
.hero p{margin-top:12px;opacity:.98}
.cta{display:flex;gap:12px;justify-content:center;margin-top:20px;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;gap:8px;border:none;border-radius:12px;font-weight:800;cursor:pointer;padding:.9rem 1.15rem}
.btn-primary{background:#0b1220;color:#e6fffb;border:1px solid #1b2a39}
.btn-ghost{background:rgba(255,255,255,.08);color:#ecfffd;border:1px solid rgba(255,255,255,.22)}

/* section & cards */
.section{padding:96px 0}
.container{max-width:var(--container);margin:0 auto;padding:0 16px}
.section-title{font-size:clamp(1.75rem,2.4vw,2.25rem);text-align:center;font-weight:800;margin-bottom:40px;background:linear-gradient(135deg,#0ea894,#0b1220);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.tools{display:flex;flex-wrap:wrap;gap:16px;justify-content:space-between;align-items:center;margin-bottom:24px}
.search{position:relative;min-width:260px;flex:1}
.search input{width:100%;padding:14px 14px 14px 40px;border:1px solid var(--border);border-radius:12px}
.search i{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--muted)}
.filters{display:flex;flex-wrap:wrap;gap:8px}
.chip{padding:.65rem 1.1rem;border:1px solid var(--border);background:#fff;border-radius:999px;font-weight:700;cursor:pointer}
.chip.active{background:var(--primary);border-color:var(--primary);color:#072d28}
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:24px}
.col{grid-column:span 4}
@media (max-width:1024px){.col{grid-column:span 6}}
@media (max-width:640px){.col{grid-column:span 12}}
.card{background:#fff;border:1px solid var(--border);border-radius:14px;overflow:hidden;box-shadow:var(--shadow-sm);display:flex;flex-direction:column}
.card:hover{transform:translateY(-2px);box-shadow:var(--shadow);transition:transform var(--transition)}
.cover{width:100%;height:204px;object-fit:cover}
.card-body{padding:20px;display:flex;flex-direction:column;gap:10px}
.cat{color:var(--primary);text-transform:uppercase;letter-spacing:.08em;font-size:.8rem;font-weight:800}
.title{font-weight:800}
.desc{color:var(--muted)}
.meta{margin-top:auto;display:flex;align-items:center;justify-content:space-between;gap:12px}
.price{font-weight:900;color:#0a8f7e}
.actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
.btn-buy{display:inline-flex;align-items:center;gap:8px;padding:.65rem 1rem;border-radius:12px;border:1px solid #8bf0e1;background:var(--primary);color:#053b34;font-weight:800;cursor:pointer}
.round{width:42px;height:42px;border:none;border-radius:12px;display:grid;place-items:center;background:#edf7f6;border:1px solid #d6ece9}
.round.active{background:var(--accent);color:#053b34;border-color:#8bf0e1}

/* cart */
.overlay{position:fixed;inset:0;background:rgba(11,18,32,.45);opacity:0;visibility:hidden;transition:opacity .25s;z-index:998}
.overlay.active{opacity:1;visibility:visible}
.cart{position:fixed;top:0;right:-420px;width:min(94vw,400px);height:100vh;background:#fff;border-left:1px solid var(--border);box-shadow:var(--shadow);z-index:999;transition:right .25s;display:flex;flex-direction:column}
.cart.active{right:0}
.cart-h{padding:20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border)}
.cart-b{flex:1;overflow:auto;padding:20px;display:flex;flex-direction:column;gap:12px}
.cart-i{display:flex;gap:12px;background:#f4fbfa;border:1px solid var(--border);border-radius:10px;padding:12px}
.cart-i img{width:64px;height:64px;object-fit:cover;border-radius:10px}
.cart-f{border-top:1px solid var(--border);padding:20px;display:flex;flex-direction:column;gap:12px}
.ttl{display:flex;justify-content:space-between;font-weight:900}
.btn-check{padding:14px;border:none;border-radius:12px;background:var(--primary);color:#053b34;font-weight:900;border:1px solid #8bf0e1}

/* footer */
footer{margin-top:96px;background:#fff;border-top:1px solid var(--border)}
.foot{max-width:var(--container);margin:0 auto;padding:24px 16px;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:16px;color:var(--muted)}
.foot .brand-mini{display:flex;align-items:center;gap:8px}
.foot .brand-mini img{height:20px}
.social{display:flex;gap:12px}
.social a{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border:1px solid var(--border);border-radius:10px;color:#3a4a50;text-decoration:none}
.social a:hover{color:var(--primary);border-color:#8bf0e1}

/* mobile */
@media (max-width:768px){
  .links{display:none}
  .hamburger{display:inline-grid;place-items:center}
  .drawer{display:block;position:fixed;top:calc(var(--header-h) + env(safe-area-inset-top,0px));left:0;right:0;background:#fff;border-bottom:1px solid var(--border);transform:translateY(-120%);transition:.25s;z-index:999}
  .drawer.open{transform:translateY(0)}
  .drawer a{display:block;padding:14px 16px;border-top:1px solid var(--border);text-decoration:none;color:#0b1220}
}
</style>
</head>
<body>
<a class="skip-link" href="#produk">Lewati ke konten</a>

<header class="header">
  <nav class="nav" aria-label="Navigasi utama">
    <a class="brand" href="#home" aria-label="Digineer Store">
      <img src="assets/logo.png" alt="Digineer">
      <span>Digineer</span>
    </a>

    <div class="links" role="menubar">
      <a class="nav-link" href="#home" role="menuitem">Home</a>
      <a class="nav-link" href="#produk" role="menuitem">Produk</a>
      <a class="nav-link" href="#about" role="menuitem">Tentang</a>
      <a class="nav-link" href="#contact" role="menuitem">Kontak</a>
    </div>

    <div class="actions">
      <button class="icon-btn hamburger" id="btnMenu" aria-label="Buka menu" aria-expanded="false"><i class="fas fa-bars"></i></button>
      <button class="icon-btn" aria-label="Wishlist"><i class="far fa-heart"></i><span class="badge" id="wishlistBadge">0</span></button>
      <button class="icon-btn" aria-label="Keranjang" onclick="toggleCart()"><i class="fas fa-cart-shopping"></i><span class="badge" id="cartBadge">0</span></button>
      <a class="icon-btn" href="admin.html" aria-label="Admin"><i class="fas fa-user-cog"></i></a>
    </div>
  </nav>
  <div class="drawer" id="drawer">
    <a href="#home" onclick="closeDrawer()">Home</a>
    <a href="#produk" onclick="closeDrawer()">Produk</a>
    <a href="#about" onclick="closeDrawer()">Tentang</a>
    <a href="#contact" onclick="closeDrawer()">Kontak</a>
  </div>
</header>

<section class="hero" id="home">
  <div class="hero-inner">
    <h1>Solusi Digital <span class="sub">Profesional</span></h1>
    <p>Jasa desain, development website, dan solusi kreatif untuk transformasi bisnis Anda dengan tim ahli berpengalaman.</p>
    <div class="cta">
      <button class="btn btn-primary" onclick="scrollToProducts()"><i class="fas fa-rocket"></i> Jelajahi Layanan</button>
      <button class="btn btn-ghost" onclick="showNotification('Fitur konsultasi akan segera hadir!', 'info')"><i class="fas fa-comments"></i> Konsultasi Gratis</button>
    </div>
  </div>
</section>

<section class="section" id="produk" aria-label="Layanan Kami">
  <div class="container">
    <h2 class="section-title">Layanan Kami</h2>
    <div class="tools">
      <div class="search">
        <i class="fas fa-search" aria-hidden="true"></i>
        <input id="searchInput" type="text" placeholder="Cari layanan..." oninput="onSearch(this.value)">
      </div>
      <div class="filters" role="tablist">
        <button class="chip active" onclick="filterProducts('all', this)" aria-selected="true">Semua</button>
        <button class="chip" onclick="filterProducts('design', this)">Desain</button>
        <button class="chip" onclick="filterProducts('development', this)">Development</button>
        <button class="chip" onclick="filterProducts('video', this)">Video</button>
      </div>
    </div>
    <div class="grid" id="productsContainer" aria-live="polite" aria-busy="true"></div>
  </div>
</section>

<div class="overlay" id="overlay" onclick="toggleCart()" aria-hidden="true"></div>
<aside class="cart" id="cart" aria-label="Keranjang">
  <div class="cart-h"><strong>Keranjang Belanja</strong><button class="icon-btn" onclick="toggleCart()" aria-label="Tutup"><i class="fas fa-times"></i></button></div>
  <div class="cart-b" id="cartItems"></div>
  <div class="cart-f"><div class="ttl"><span>Total</span><span id="cartTotal">Rp 0</span></div><button class="btn-check" onclick="checkout()"><i class="fas fa-credit-card"></i> Checkout Sekarang</button></div>
</aside>

<div id="liveRegion" aria-live="polite" aria-atomic="true" style="position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden;"></div>

<footer>
  <div class="foot">
    <div class="brand-mini"><img src="assets/logo.png" alt="Digineer"><span>Â© <span id="year"></span> Digineer Store</span></div>
    <div class="social">
      <a href="https://wa.me/6289507083879" aria-label="WhatsApp"><i class="fa-brands fa-whatsapp"></i></a>
      <a href="https://www.instagram.com/digineer_/?igsh=cmx3eW1sdXlybnk5#" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
      <a href="https://www.tiktok.com/@digineer?_t=ZS-90cDrIAoYOj&_r=1" aria-label="TikTok"><i class="fa-brands fa-tiktok"></i></a>
    </div>
  </div>
</footer>

<script>
/* ======= STATE ======= */
let products = []; // diisi dari API
let cart = JSON.parse(localStorage.getItem('digineer-cart')) || [];
let wishlist = JSON.parse(localStorage.getItem('digineer-wishlist')) || [];
let currentFilter = 'all'; let currentSearch='';
const IDR = new Intl.NumberFormat('id-ID',{style:'currency',currency:'IDR',maximumFractionDigits:0});
const WHATSAPP_NUMBER='089507083879';
const toWaIntl=n=>{let s=(n||'').replace(/\D/g,''); if(s.startsWith('0')) s='62'+s.slice(1); if(s.startsWith('620')) s='62'+s.slice(2); return s;}
const WAPP = toWaIntl(WHATSAPP_NUMBER);

/* ======= HELPERS ======= */
const debounce=(fn,d=300)=>{let t;return(...a)=>{clearTimeout(t);t=setTimeout(()=>fn(...a),d)}}
const escapeHTML= s=>(s||'').replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]))
const getCategoryName=c=>({design:'Desain',development:'Development',video:'Video Production'})[c]||c

/* Drawer */
const btnMenu=document.getElementById('btnMenu'); const drawer=document.getElementById('drawer');
function closeDrawer(){drawer.classList.remove('open'); btnMenu?.setAttribute('aria-expanded','false')}
btnMenu?.addEventListener('click',()=>{const open=drawer.classList.toggle('open');btnMenu.setAttribute('aria-expanded',String(open))})

/* Skeleton */
function showSkeleton(n=6){
  const grid=document.getElementById('productsContainer');
  grid.setAttribute('aria-busy','true');
  grid.innerHTML = Array.from({length:n}).map(()=>`<div class="col"><div class="card"><div class="cover" style="background:#eef6f5"></div><div class="card-body"><div class="cat" style="opacity:.4">Loadingâ€¦</div><div class="title" style="opacity:.3;height:24px;background:#f0f5f4;border-radius:8px"></div></div></div></div>`).join('');
}

/* Fetch products from API (single source of truth) */
async function loadProducts(){
  const res = await fetch('/api/products', {cache:'no-store'});
  products = await res.json();
}

/* Render */
function renderProducts(){
  const grid=document.getElementById('productsContainer');
  let list=[...products];
  if(currentFilter!=='all') list=list.filter(p=>p.category===currentFilter);
  if(currentSearch){ const q=currentSearch.toLowerCase(); list=list.filter(p=>p.name.toLowerCase().includes(q)||p.description.toLowerCase().includes(q)); }
  if(list.length===0){ grid.innerHTML=`<div class="col" style="grid-column:1/-1;text-align:center;color:#63707f"><p>Tidak ada layanan yang cocok.</p></div>`; grid.removeAttribute('aria-busy'); return; }
  grid.innerHTML=list.map(p=>`
    <div class="col">
      <article class="card">
        <img class="cover" loading="lazy" decoding="async" src="${p.image}" onerror="this.onerror=null;this.src='https://via.placeholder.com/600x400?text=Digineer';" alt="${escapeHTML(p.name)}">
        <div class="card-body">
          <div class="cat">${getCategoryName(p.category)}</div>
          <h3 class="title">${escapeHTML(p.name)}</h3>
          <p class="desc">${escapeHTML(p.description)}</p>
          <div class="meta">
            <div class="price">${IDR.format(p.price)}</div>
            <div class="actions">
              <button class="btn-buy" onclick="addToCart('${p.id}')"><i class="fas fa-cart-plus"></i> Beli</button>
              <button class="round ${wishlist.includes(p.id)?'active':''}" onclick="toggleWishlist('${p.id}')"><i class="${wishlist.includes(p.id)?'fas':'far'} fa-heart"></i></button>
            </div>
          </div>
        </div>
      </article>
    </div>`).join('');
  grid.removeAttribute('aria-busy');
}
function displayProducts(){ renderProducts(); }

/* Filter & search */
function filterProducts(cat,el){ currentFilter=cat; document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active')); el?.classList.add('active'); displayProducts(); }
const onSearch=debounce(q=>{ currentSearch=(q||'').trim(); displayProducts(); },300);

/* Cart */
const overlay=document.getElementById('overlay'); const cartEl=document.getElementById('cart'); let lastFocused=null;
function toggleCart(){ const open=!cartEl.classList.contains('active'); cartEl.classList.toggle('active'); overlay.classList.toggle('active'); document.body.style.overflow=open?'hidden':''; if(open){lastFocused=document.activeElement; cartEl.querySelector('button,[href],input')?.focus();} else {lastFocused?.focus();}}
function addToCart(id){ const p=products.find(x=>x.id===id); const ex=cart.find(x=>x.id===id); if(ex) ex.quantity+=1; else cart.push({...p,quantity:1}); localStorage.setItem('digineer-cart',JSON.stringify(cart)); updateCartUI(); showNotification(`"${p.name}" ditambahkan ke keranjang! ðŸ›’`); }
function updateCartUI(){ document.getElementById('cartBadge').textContent=cart.reduce((s,i)=>s+i.quantity,0); const box=document.getElementById('cartItems'); const totalEl=document.getElementById('cartTotal'); if(cart.length===0){box.innerHTML=`<div style="text-align:center;color:#63707f"><p>Keranjang kosong</p></div>`; totalEl.textContent=IDR.format(0);return;} box.innerHTML=cart.map(i=>`<div class="cart-i"><img src="${i.image}" alt="${escapeHTML(i.name)}"><div style="flex:1"><div style="font-weight:800">${escapeHTML(i.name)}</div><div style="color:#0a8f7e;font-weight:900">${IDR.format(i.price)} Ã— ${i.quantity}</div><div style="display:flex;gap:.5rem;margin-top:.5rem;align-items:center"><button class="icon-btn" onclick="updateQty('${i.id}', ${i.quantity-1})" ${i.quantity<=1?'disabled':''}><i class="fas fa-minus"></i></button><span>${i.quantity}</span><button class="icon-btn" onclick="updateQty('${i.id}', ${i.quantity+1})"><i class="fas fa-plus"></i></button><button class="icon-btn" onclick="removeFromCart('${i.id}')" style="margin-left:auto;color:#ef4444"><i class="fas fa-trash"></i></button></div></div></div>`).join(''); const total=cart.reduce((s,i)=>s+i.price*i.quantity,0); totalEl.textContent=IDR.format(total);}
function updateQty(id,n){ if(n<1){removeFromCart(id);return;} const it=cart.find(x=>x.id===id); if(it){ it.quantity=n; localStorage.setItem('digineer-cart',JSON.stringify(cart)); updateCartUI(); } }
function removeFromCart(id){ cart=cart.filter(x=>x.id!==id); localStorage.setItem('digineer-cart',JSON.stringify(cart)); updateCartUI(); showNotification('Produk dihapus dari keranjang'); }
function checkout(){ if(cart.length===0){showNotification('Keranjang masih kosong!','error'); return;} const total=cart.reduce((s,i)=>s+i.price*i.quantity,0); const lines=cart.map(i=>`â€¢ ${i.name} (${i.quantity}x) - ${IDR.format(i.price*i.quantity)}`).join('%0A'); const msg=`Halo Digineer Store! ðŸ‘‹%0A%0A${lines}%0A%0ATotal: *${IDR.format(total)}*`; window.open(`https://wa.me/${WAPP}?text=${msg}`,'_blank'); }

/* Wishlist & notif */
function toggleWishlist(id){ const i=wishlist.indexOf(id); if(i>-1) wishlist.splice(i,1); else wishlist.push(id); localStorage.setItem('digineer-wishlist',JSON.stringify(wishlist)); document.getElementById('wishlistBadge').textContent=wishlist.length; displayProducts(); }
function showNotification(message,type='success'){ const live=document.getElementById('liveRegion'); live.textContent=message; }

/* Init */
async function init(){ document.getElementById('year').textContent=new Date().getFullYear(); document.getElementById('wishlistBadge').textContent=wishlist.length; showSkeleton(); await loadProducts(); displayProducts(); updateCartUI(); }
document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
